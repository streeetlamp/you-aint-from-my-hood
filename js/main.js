!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define("geolocator",[],b):"object"==typeof exports?exports.geolocator=b():a.geolocator=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="dist/",b(0)}([function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}var e=c(1),f=d(e);a.exports=f.default},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a){return!t.default.isString(a)&&!t.default.isArray(a)&&!t.default.isPlainObject(a)}function g(a,b){if(a)return z.default.create(a);if(!b)return new z.default(z.default.Code.REQUEST_FAILED);var c=t.default.safeJsonParse(b.responseText);return z.default.fromResponse(c)||c}function h(a){if((!a||a.addressLookup||a.timezone||a.map||a.staticMap)&&!H._.config.google.key)throw new z.default(z.default.Code.GOOGLE_KEY_INVALID,"A Google API key is required but it's not set or valid.")}function i(a,b){return t.default.isObject(a)?a.center=b.coords:a={element:a,center:b.coords},b.formattedAddress&&(a.title=b.formattedAddress),!a.zoom&&b.coords&&t.default.isNumber(b.coords.accuracy)&&b.coords.accuracy<1500&&(a.zoom=15),a}function j(a){var b=a.element,c=b._geolocatorMapData,d=c&&c.instance||null,e=c&&c.marker||null,f=c&&c.infoWindow||null,g=new google.maps.LatLng(a.center.latitude,a.center.longitude),h={mapTypeId:a.mapTypeId,center:g,zoom:a.zoom,styles:a.styles||null};return d?d.setOptions(h):d=new google.maps.Map(a.element,h),f&&(f=null),e&&e instanceof google.maps.Marker&&(google.maps.event.clearInstanceListeners(e),e.setMap(null),e=null),a.marker&&(e=new google.maps.Marker({position:h.center,map:d}),a.title&&(f=new google.maps.InfoWindow,f.setContent(a.title),google.maps.event.addListener(e,"click",function(){f.open(d,e)}))),c={element:b,instance:d,marker:e,infoWindow:f,options:h},b._geolocatorMapData=c,c}function k(a,b){if(a&&a.address){var c=void 0,d=a.address;if(t.default.isString(d.countryCode)&&2===d.countryCode.length?c=d.countryCode:t.default.isString(d.country)&&2===d.country.length&&(c=d.country),c&&(a.flag=D.default.URL.FLAG+c.toLowerCase()+".svg",b.staticMap)){var e=t.default.isPlainObject(b.staticMap)?t.default.clone(b.staticMap):{};e.center=a.coords,a.staticMap=H.getStaticMap(e)}}}function l(a,b){return function(c,d){return c?b(z.default.create(c),null):(k(d,a),a.map?(a.map=i(a.map,d),void H.createMap(a.map,function(a,c){return a?b(a,null):(d.map=c,b(null,d))})):b(null,d))}}function m(a,b,c){h(),x.default.geocode(a,H._.config,b,l(b,c))}function n(a,b,c){function d(a){H.getTimeZone(e.coords,function(b,c){return b?a(b,null):(delete c.timestamp,e.timezone=c,e.timestamp=t.default.time(),void a(null,e))})}var e=t.default.clone(a,{own:!1});return b.addressLookup||b.timezone?void(b.addressLookup?H.reverseGeocode(e.coords,function(a,f){return a?c(a,null):(e=t.default.extend({},f,e),e.address=f.address,e.timestamp=t.default.time(),void(b.timezone?d(c):c(a,e)))}):b.timezone?d(c):c(null,e)):c(null,e)}function o(a,b,c){function d(){e?b(e):c(new z.default(z.default.Code.POSITION_UNAVAILABLE))}var e=void 0,f=void 0,g=t.default.isFunction(a.onProgress)?a.onProgress:t.default.noop;f=H.watch(a,function(b,h){return b?f.clear(function(){c(b)}):(e=h,void(f.cycle>1&&e.coords.accuracy<=a.desiredAccuracy?f.clear(d):g(e)))}),f.clear(a.maximumWait+100,d)}function p(a){var b=H._.config;return t.default.isFilledArray(a.styles)?a.styles:t.default.isFilledArray(b.google.styles)?b.google.styles:null}Object.defineProperty(b,"__esModule",{value:!0});var q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},r=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),s=c(2),t=d(s),u=c(3),v=d(u),w=c(4),x=d(w),y=c(6),z=d(y),A=c(7),B=d(A),C=c(5),D=d(C),E=6371,F=3959,G={language:"en",https:!0,google:{version:"3",key:"",styles:null}},H=function(){function a(){e(this,a)}return r(a,null,[{key:"config",value:function(b){return b&&(a._.config=t.default.extend(G,b)),a._.config}},{key:"getStaticMap",value:function(b,c){if(!t.default.isPlainObject(b)||!b.center)throw new z.default(z.default.Code.INVALID_PARAMETERS,"A center address or coordinates are required.");if(t.default.isString(b.center))return a.geocode(b.center,function(d,e){d&&c(d),b.center=e.coords,c(null,a.getStaticMap(b))});var d=a._.config,e=t.default.extend({mapTypeId:D.default.MapTypeId.ROADMAP,size:{width:600,height:300},scale:1,zoom:9,marker:"red",format:D.default.ImageFormat.PNG,language:d.language||"en",region:null},b),f=t.default.isPlainObject(e.center)?e.center.latitude+","+e.center.longitude:String(e.center),g=t.default.isPlainObject(e.size)?e.size.width+"x"+e.size.height:String(e.size),h=D.default.URL.GOOGLE_SATATIC_MAP+("?center="+f+"&maptype="+e.mapTypeId)+("&size="+g+"&scale="+e.scale+"&zoom="+e.zoom)+("&format="+e.format+"&language="+e.language);if(e.marker){var i=t.default.isString(e.marker)?e.marker:"red";h+="&markers="+encodeURIComponent("color:"+i+"|"+f)}e.region&&(h+="&region="+e.region),d.google.key&&(h+="&key="+d.google.key);var j=p(e);return j&&(h+="&"+x.default.mapStylesToParams(j)),t.default.isFunction(c)?c(null,h):h}},{key:"createMap",value:function(b,c){t.default.isPlainObject(b)||(b={element:b}),b=t.default.extend({element:null,mapTypeId:D.default.MapTypeId.ROADMAP,title:void 0,marker:!0,zoom:9},b);var d=b.element,e=void 0;if(t.default.isString(d)?e=document.getElementById(d):t.default.isJQueryObject(d)?e=d[0]:a.isGoogleLoaded()&&d instanceof google.maps.Map&&(e=d.getDiv()),!t.default.isElement(e)&&!t.default.isNode(e))throw new z.default(z.default.Code.INVALID_PARAMETERS,"A valid DOM element or element ID is required to create a map.");if(!t.default.isPlainObject(b.center)||!t.default.isNumber(b.center.latitude)||!t.default.isNumber(b.center.longitude))throw new z.default(z.default.Code.INVALID_PARAMETERS,"Center coordinates are required to create a map.");b.element=e;var f=a._.config,g=f.google.key;b.styles=p(b),a.ensureGoogleLoaded(g,function(a){if(a)throw new z.default(z.default.Code.GOOGLE_API_FAILED,String(a.message||a));var d=j(b);c(null,d)})}},{key:"locate",value:function(b,c){function d(c){return b.fallbackToIP?a.locateByIP(b,function(a,b){return a?g(a,null):g(null,b)}):void g(c,null)}function e(a){n(a,b,g)}function f(a){a=z.default.create(a),d(a)}b=t.default.extend({enableHighAccuracy:!0,timeout:5e3,maximumWait:1e4,maximumAge:0,desiredAccuracy:30,onProgress:t.default.noop,fallbackToIP:!1,addressLookup:!1,timezone:!1,map:void 0,staticMap:!1},b),b.enableHighAccuracy&&(b.maximumAge=0),b.timeout<1e3&&(b.timeout=1e3),b.maximumWait<b.timeout&&(b.maximumWait=b.timeout),h(b);var g=l(b,c);if(a.isGeolocationSupported())b.enableHighAccuracy?o(b,e,f):navigator.geolocation.getCurrentPosition(e,f,b);else{var i=new z.default(z.default.Code.GEOLOCATION_NOT_SUPPORTED);d(i)}}},{key:"locateByMobile",value:function(b,c){if(!t.default.isPlainObject(b))throw new z.default(z.default.Code.INVALID_PARAMETERS);var d=l(b,c);b=t.default.extend({homeMobileCountryCode:void 0,homeMobileNetworkCode:void 0,radioType:void 0,carrier:void 0,fallbackToIP:!1,cellTowers:void 0,wifiAccessPoints:void 0,addressLookup:!1,timezone:!1,map:void 0,raw:!1},b),b.considerIp=b.fallbackToIP,h();var e=a._.config,f=e.google.key||"",i=t.default.setProtocol(D.default.URL.GOOGLE_GEOLOCATION,e.https),j={url:i+"?key="+f,headers:{"Content-Type":"application/json"},data:JSON.stringify(b)};v.default.post(j,function(a,c){var e=g(a,c);return z.default.isGeoError(e)?d(e,null):(e=b.raw?e:{coords:{latitude:e.location.lat,longitude:e.location.lng,accuracy:e.accuracy},timestamp:t.default.time()},void n(e,b,d))})}},{key:"locateByIP",value:function(b,c){var d=a._.geoIpSource;if(!t.default.isPlainObject(d))throw new z.default(z.default.Code.INVALID_GEO_IP_SOURCE,"Please set a valid Geo-IP Source via geolocator.setGeoIPSource(options).");h(b||{});var e={url:d.url,async:!0,clean:!0};if(d.callbackParam)e.callbackParam=d.callbackParam,e.rootName="geolocator._.cb";else if(!d.globalVar)throw new z.default(z.default.Code.INVALID_GEO_IP_SOURCE,"Either callbackParam or globalVar should be set for Geo-IP source.");return v.default.jsonp(e,function(a,e){if(a)return c(z.default.create(a),null);if(d.globalVar&&(window[d.globalVar]?(e=t.default.clone(window[d.globalVar]),delete window[d.globalVar]):e=null),!e)return a=new z.default(z.default.Code.INVALID_RESPONSE),c(a,null);t.default.isPlainObject(d.schema)&&(e=t.default.mapToSchema(e,d.schema)),e.provider=d.provider||"unknown",k(e,b),e.coords&&(e.coords.latitude=Number(e.coords.latitude),e.coords.longitude=Number(e.coords.longitude));var f=l(b,c);n(e,b,f)})}},{key:"setGeoIPSource",value:function(b){if(!t.default.isPlainObject(b))throw new z.default(z.default.Code.INVALID_PARAMETERS,"Geo-IP source options is invalid.");if(!t.default.isStringSet(b.url))throw new z.default(z.default.Code.INVALID_PARAMETERS,"Geo-IP source should have a valid URI.");a._.geoIpSource=Object.freeze(b)}},{key:"watch",value:function(b,c){function d(b){var d=t.default.clone(b,{own:!1});if(g){var e=a.calcDistance({from:b.coords,to:g,formula:a.DistanceFormula.HAVERSINE,unitSystem:g.unitSystem});d.targetReached=e<=g.radius,f&&d.targetReached&&f.clear(function(){return c(null,d)})}return c(null,d)}function e(a){c(z.default.create(a),null)}if(!a.isGeolocationSupported())return c(new z.default(z.default.Code.GEOLOCATION_NOT_SUPPORTED),null),{};var f=void 0,g=void 0;return b=t.default.extend({enableHighAccuracy:!0,timeout:6e3,maximumAge:0,clearOnError:!1},b),t.default.isPlainObject(b.target)&&(g=t.default.extend({radius:.5,unitSystem:a.UnitSystem.METRIC},b.target)),new B.default(d,e,b)}},{key:"geocode",value:function(a,b){m(!1,a,b)}},{key:"reverseGeocode",value:function(a,b){m(!0,a,b)}},{key:"addressLookup",value:function(b,c){a.reverseGeocode(b,c)}},{key:"getTimeZone",value:function(b,c){if(!t.default.isPlainObject(b)||!t.default.isNumber(b.latitude)||!t.default.isNumber(b.longitude))throw new z.default(z.default.Code.INVALID_PARAMETERS);h();var d=a._.config;b=t.default.extend({key:d.google.key||"",language:d.language||"en",timestamp:t.default.time(!0),raw:!1},b);var e=t.default.setProtocol(D.default.URL.GOOGLE_TIMEZONE,d.https),f={url:e+"?location="+b.latitude+","+b.longitude+"&timestamp="+b.timestamp+"&language="+b.language+"&key="+b.key};v.default.xhr(f,function(a,d){var e=g(a,d);return z.default.isGeoError(e)?c(e,null):(e=b.raw?e:{id:e.timeZoneId,name:e.timeZoneName,abbr:t.default.abbr(e.timeZoneName,{dots:!1}),dstOffset:e.dstOffset,rawOffset:e.rawOffset,timestamp:b.timestamp},void c(a,e))})}},{key:"getDistanceMatrix",value:function(b,c){h();var d=a._.config.google.key;a.ensureGoogleLoaded(d,function(a){if(a)throw new z.default(z.default.Code.GOOGLE_API_FAILED,String(a.message||a));var d=b.origins||b.origin||b.from,e=b.destinations||b.destination||b.to;if(!t.default.isPlainObject(b)||f(d)||f(e))throw new z.default(z.default.Code.INVALID_PARAMETERS);b.origins=x.default.toPointList(d),b.destinations=x.default.toPointList(e),b=t.default.extend({travelMode:google.maps.TravelMode.DRIVING,avoidFerries:void 0,avoidHighways:void 0,avoidTolls:void 0,unitSystem:google.maps.UnitSystem.METRIC},b);var g=new google.maps.DistanceMatrixService;g.getDistanceMatrix(b,function(a,d){var e=null;d!==google.maps.DistanceMatrixStatus.OK?(e=z.default.fromResponse(d)||z.default.fromResponse(a),a=null):a=b.raw?a:x.default.formatDistanceResults(a),c(e,a)})})}},{key:"calcDistance",value:function(b){b=t.default.extend({formula:a.DistanceFormula.HAVERSINE,unitSystem:a.UnitSystem.METRIC},b);var c=b.from,d=b.to,e=b.unitSystem===a.UnitSystem.METRIC?E:F;if(b.formula===a.DistanceFormula.HAVERSINE){var f=a.degToRad(d.latitude-c.latitude),g=a.degToRad(d.longitude-c.longitude),h=Math.sin(f/2)*Math.sin(f/2)+Math.cos(a.degToRad(c.latitude))*Math.cos(a.degToRad(d.longitude))*Math.sin(g/2)*Math.sin(g/2),i=2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h));return e*i}var j=a.degToRad(c.latitude),k=a.degToRad(d.latitude),l=a.degToRad(c.longitude),m=a.degToRad(d.longitude),n=(m-l)*Math.cos((j+k)/2),o=k-j;return Math.sqrt(n*n+o*o)*e}},{key:"getIP",value:function(b){var c=a._.config,d={url:t.default.setProtocol(D.default.URL.IP,c.https),async:!0,clean:!0,params:{format:"jsonp"},callbackParam:"callback",rootName:"geolocator._.cb"};return v.default.jsonp(d,function(a,c){return a?b(z.default.create(a),null):c?("object"===("undefined"==typeof c?"undefined":q(c))&&(c.timestamp=t.default.time()),void b(null,c)):(a=new z.default(z.default.Code.INVALID_RESPONSE),b(a,null))})}},{key:"ensureGoogleLoaded",value:function(b,c){var d=void 0;if(t.default.isFunction(b)?c=b:d=b,!a.isGoogleLoaded()){var e={url:D.default.URL.GOOGLE_MAPS_API,async:!0,callbackParam:"callback",params:{key:d||""},rootName:"geolocator._.cb"};return v.default.jsonp(e,c)}c()}},{key:"isGoogleLoaded",value:function(){return"google"in window&&google.maps}},{key:"isPositionError",value:function(a){return t.default.isPositionError(a)}},{key:"isGeoError",value:function(a){return z.default.isGeoError(a)}},{key:"isGeolocationSupported",value:function(){return navigator&&"geolocation"in navigator}},{key:"kmToMi",value:function(a){return.621371*a}},{key:"miToKm",value:function(a){return a/.621371}},{key:"degToRad",value:function(a){return a*(Math.PI/180)}},{key:"radToDeg",value:function(a){return a*(180/Math.PI)}},{key:"decToDegMinSec",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=a<0?-1:1,d=a<0?"S":"N",e=a<0?"W":"E",f=b?e:d,g=Math.abs(Math.round(1e6*a));return Math.floor(g/1e6)*c+"Â° "+Math.floor(60*(g/1e6-Math.floor(g/1e6)))+"' "+60*Math.floor(1e5*(60*(g/1e6-Math.floor(g/1e6))-Math.floor(60*(g/1e6-Math.floor(g/1e6)))))/1e5+'" '+f}},{key:"Error",get:function(){return z.default}},{key:"MapTypeId",get:function(){return D.default.MapTypeId}},{key:"LocationType",get:function(){return D.default.LocationType}},{key:"TravelMode",get:function(){return D.default.TravelMode}},{key:"UnitSystem",get:function(){return D.default.UnitSystem}},{key:"RadioType",get:function(){return D.default.RadioType}},{key:"DistanceFormula",get:function(){return D.default.DistanceFormula}},{key:"ImageFormat",get:function(){return D.default.ImageFormat}}]),a}();H._={config:t.default.extend({},G),cb:{}},H.setGeoIPSource({provider:"freegeoip",url:"https://freegeoip.net/json",callbackParam:"callback",schema:{ip:"ip",coords:{latitude:"latitude",longitude:"longitude"},address:{city:"city",state:"region_name",stateCode:"region_code",postalCode:"zip_code",countryCode:"country_code",country:"country_name",region:"region_name"},timezone:{id:"time_zone"}}}),b.default=H},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},d=Object.prototype.toString,e={noop:function(){},isString:function(a){return"string"==typeof a},isStringSet:function(a){return"string"==typeof a&&a.trim().length>0},isNumber:function(a){return"number"==typeof a},isObject:function(a){var b="undefined"==typeof a?"undefined":c(a);return Boolean(a)&&("object"===b||"function"===b)},isFunction:function(a){return"function"==typeof a},isArray:function(a){return Boolean(a)&&"[object Array]"===d.call(a)},isFilledArray:function(a){return e.isArray(a)&&a.length>0},isPlainObject:function(a){return Boolean(a)&&"object"===("undefined"==typeof a?"undefined":c(a))&&"[object Object]"===d.call(a)},isDate:function(a){return Boolean(a)&&"[object Date]"===d.call(a)},isElement:function(a){return!!a&&(a instanceof HTMLElement||"object"===("undefined"==typeof a?"undefined":c(a))&&1===a.nodeType)},isNode:function(a){return!!a&&(a instanceof Node||"object"===("undefined"==typeof a?"undefined":c(a))&&"number"==typeof a.nodeType)},isJQueryObject:function(a){return!!a&&("jQuery"in window&&a instanceof window.jQuery&&Boolean(a[0]))},isPositionError:function(a){return Boolean(a)&&"[object PositionError]"===d.call(a)},isError:function(a){return a instanceof Error||e.isPositionError(a)},removeQuery:function(a){return a.replace(/\?.*$/,"")},removeProtocol:function(a){return a.replace(/^(.*:)?\/\//,"")},setProtocol:function(a,b){var c=void 0;return c=void 0===b||null===b?window.location.protocol:b?"https:":"http:",a=e.removeProtocol(a),c+"//"+a},trimDots:function(a){return a.replace(/^\.+?(.*?)\.+?$/g,"$1")},encodeURI:function(a){return encodeURIComponent(a).replace(/%20/g,"+")},decodeURI:function(a){return decodeURIComponent(a.replace(/\+/g,"%20"))},toString:function(a){return null===a||void 0===a?"":a.toString&&e.isFunction(a.toString)?a.toString():String(a)},randomString:function(a){return a&&e.isNumber(a)||(a=1),a=-Math.abs(a),Math.random().toString(36).slice(a)},abbr:function(a,b){b=e.extend({upper:!0,dots:!0},b);var c=b.dots?".":"",d=a.match(/(\b\w)/gi).join(c)+c;return b.upper?d.toUpperCase():d},params:function a(b,c){if(!e.isPlainObject(b)||0===Object.keys(b).length)return"";c=e.extend({encode:!0,operator:"=",separator:"&",include:void 0,exclude:void 0},c);var a=[],d=e.isArray(c.include)?c.include:null,f=!d&&e.isArray(c.exclude)?c.exclude:null;return e.forIn(b,function(b,g){if((!d||d.indexOf(g)>=0)&&(!f||f.indexOf(g)<0)){var h=e.toString(b);h=c.encode?e.encodeURI(h):h;var i=c.encode?e.encodeURI(g):g;a.push(i+c.operator+h)}}),a.join(c.separator)},notateGlobalObj:function(a){a=e.trimDots(a);var b=a.split("."),c=window;return"window"!==b[0]&&"document"!==b[0]||b.shift(),b.forEach(function(a){c=c[a]}),c},forIn:function(a,b){var c=void 0;for(c in a)if(b(a[c],c,a)===!1)break},extend:function(a){if(!e.isObject(a))return{};for(var b=void 0,c=void 0,d=arguments.length,f=Array(d>1?d-1:0),g=1;g<d;g++)f[g-1]=arguments[g];return f.forEach(function(d){for(b in d)c=d[b],e.isArray(c)?a[b]=c.concat():e.isDate(c)?a[b]=new Date(c):e.isFunction(c)?a[b]=c:e.isObject(c)?a[b]=e.extend({},c):a[b]=c}),a},clone:function(a,b){if(!a)return{};e.isArray(b)&&(b={keys:b}),b=e.extend({keys:null,own:!0},b);var c=void 0,d={};return e.forIn(a,function(f,g){c=b.keys?b.keys.indexOf(g)>=0:b.own&&a.hasOwnProperty(g)||!b.own,c&&(e.isObject(f)?d[g]=e.clone(f,b):d[g]=f)}),d},mapToSchema:function(a,b){var c={};return e.forIn(b,function(b,d){e.isPlainObject(b)?c[d]=e.mapToSchema(a,b):c[d]=a[b]}),c},safeJsonParse:function(a){var b=null;try{b=JSON.parse(a)}catch(a){}return b},time:function(a){var b=Date.now();return a?parseInt(b/1e3,10):b}};b.default=e},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b,c){return b=i.default.isString(b)?{url:b}:b||{},b.method=a,j.xhr(b,c)}Object.defineProperty(b,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(2),i=d(h),j=function(){function a(){e(this,a)}return g(a,null,[{key:"jsonp",value:function(a,b){function c(c,f,i){d&&(clearTimeout(d),d=null),(f||a.clean)&&e.parentNode&&e.parentNode.removeChild(e),j&&delete h[g],b(c,i)}var d=void 0;if(b=i.default.isFunction(b)?b:i.default.noop,i.default.isString(a)&&(a={url:a}),!i.default.isPlainObject(a))return b(new Error("No options or target URL is provided."));if(a=i.default.extend({async:!0,defer:!1,timeout:0,params:{},clean:!0},a),i.default.isString(a.url)===!1||""===a.url.trim())return b(new Error("No target URL is provided."));var e=document.createElement("script"),f=i.default.isString(a.callbackParam)&&""!==a.callbackParam.trim(),g=void 0,h=void 0,j=i.default.isString(a.rootName)&&"window"!==a.rootName&&"document"!==a.rootName&&""!==a.rootName.trim();f&&(g="_jsonp_"+i.default.randomString(10),a.params[a.callbackParam]=j?a.rootName+"."+g:g);var k=i.default.params(a.params)||"",l=a.url.indexOf("?")>=0?"&":"?",m=k?""+a.url+l+k:a.url;if(g){var n=function(a){c(null,!1,a)};h=j?i.default.notateGlobalObj(a.rootName):window,h[g]=n}else e.readyState?e.onreadystatechange=function(){"loaded"!==e.readyState&&"complete"!==e.readyState||(e.onreadystatechange=null,c(null))}:e.onload=function(){c(null)};e.onerror=function(b){var d="Could not load source at "+i.default.removeQuery(a.url);b&&(d+="\n"+(b.message||b)),c(new Error(d))},a.type&&(e.type=a.type),a.charset&&(e.charset=a.charset),a.async&&(e.async=!0),a.defer&&(e.defer=!0),a.crossorigin&&(e.crossorigin=a.crossorigin),e.src=m,document.getElementsByTagName("head")[0].appendChild(e),i.default.isNumber(a.timeout)&&a.timeout>0&&(d=setTimeout(function(){e.src="",c(new Error("Operation timed out."),!0)},a.timeout))}},{key:"xhr",value:function b(c,d){var b=void 0,e=void 0;if(!("XMLHttpRequest"in window))throw new Error("XMLHttpRequest is not supported!");b=new XMLHttpRequest;var f=i.default.isFunction(d);d=f?d:i.default.noop,i.default.isString(c)&&(c={url:c}),i.default.isPlainObject(c)?c=i.default.extend({method:"GET",data:void 0,async:!0,timeout:0,withCredentials:!1,mimeType:void 0,username:"",password:""},c):d(new Error("No options or target URL is provided.")),i.default.isString(c.url)===!1&&d(new Error("No target URL is provided.")),c.username=String(c.username),c.password=String(c.password),c.method=c.method.toUpperCase(),"POST"!==c.method&&"PUT"!==c.method&&(c.data=void 0),f&&(b.onreadystatechange=function(){if(b.readyState===a.XHR_READY_STATE.DONE)if(200===b.status)d(null,b);else{var c=0===b.status?". Make sure you have permission if this is a cross-domain request.":"";e=new Error("The request returned status: "+b.status+c),d(e,b)}},i.default.isNumber(c.timeout)&&c.timeout>0&&(b.timeout=c.timeout,b.ontimeout=function(){e=new Error("The request had timed out."),d(e,b)})),b.open(c.method,c.url,c.async,c.username,c.password),i.default.isPlainObject(c.headers)&&Object.keys(c.headers).forEach(function(a){var d=c.headers[a];b.setRequestHeader(a,d)}),c.mimeType&&b.overrideMimeType(c.mimeType),b.send(c.data)}},{key:"get",value:function(b,c){return a.xhr(b,c)}},{key:"post",value:function(a,b){return f("POST",a,b)}},{key:"put",value:function(a,b){return f("PUT",a,b)}},{key:"delete",value:function(a,b){return f("DELETE",a,b)}}]),a}();j.XHR_READY_STATE={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},b.default=j},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(2),f=d(e),g=c(3),h=d(g),i=c(5),j=d(i),k=c(6),l=d(k),m={toGoogleCoords:function(a){return{lat:a.lat||a.latitude,lng:a.lng||a.longitude}},fromGoogleCoords:function(a){return{latitude:a.latitude||a.lat,longitude:a.longitude||a.lng}},toPointList:function(a){return a=f.default.isArray(a)?a:[a],a.map(function(a){return f.default.isString(a)?a:m.toGoogleCoords(a)})},getGeocodeComps:function(a){return{route:a.route,locality:a.locality,administrative_area:a.administrativeArea,postal_code:a.postalCode,country:a.country,region:a.region}},buildGeocodeParams:function(a,b){var c=[],d=f.default.encodeURI;if(b)a.placeId?c.push("place_id="+a.placeId):a.latitude&&a.longitude&&c.push("latlng="+a.latitude+","+a.longitude);else{a.address&&c.push("address="+d(a.address));var e=m.getGeocodeComps(a);e=f.default.params(e,{operator:":",separator:"|"}),c.push("components="+e);var g=a.bounds;f.default.isArray(g)&&4===g.length?c.push("bounds="+g[0]+","+g[1]+"|"+g[2]+","+g[3]):f.default.isPlainObject(g)&&4===Object.keys(g).length&&c.push("bounds="+g.southwestLat+","+g.southwestLng+"|"+g.northeastLat+","+g.northeastLng)}return c.push("language="+a.language),c.push("key="+a.key),c.join("&")},formatGeocodeResults:function(a){if(!f.default.isArray(a)||a.length<=0)return{location:null,address:null,formattedAddress:"",type:null,placeId:""};var b=void 0,c=void 0,d={},e=a[0],g=e.address_components;for(b=0;b<g.length;b+=1)c=g[b],c.types&&c.types.length>0&&(d[c.types[0]]=c.long_name,d[c.types[0]+"_s"]=c.short_name);var h=e.geometry;return{coords:h&&h.location?{latitude:h.location.lat,longitude:h.location.lng}:null,address:{commonName:d.point_of_interest||d.premise||d.subpremise||d.colloquial_area||"",streetNumber:d.street_number||"",street:d.administrative_area_level_4||d.administrative_area_level_3||d.route||"",route:d.route||"",neighborhood:d.neighborhood||d.administrative_area_level_5||d.administrative_area_level_4||"",town:d.sublocality||d.administrative_area_level_2||"",city:d.locality||d.administrative_area_level_1||"",region:d.administrative_area_level_2||d.administrative_area_level_1||"",postalCode:d.postal_code||"",state:d.administrative_area_level_1||"",stateCode:d.administrative_area_level_1_s||"",country:d.country||"",countryCode:d.country_s||""},formattedAddress:e.formatted_address,type:h.location_type||"",placeId:e.place_id,timestamp:f.default.time()}},geocode:function(a,b,c,d){var e={};if(f.default.isString(c)){e={};var g=a?"placeId":"address";e[g]=c}else{if(!f.default.isPlainObject(c))throw new l.default(l.default.Code.INVALID_PARAMETERS);e=c}if(a){var i=f.default.isNumber(c.latitude)&&f.default.isNumber(c.longitude);if(!f.default.isString(c.placeId)&&!i)throw new l.default(l.default.Code.INVALID_PARAMETERS)}e=f.default.extend({key:b.google.key||"",language:b.language||"en",raw:!1},e);var k=m.buildGeocodeParams(e,a),n=f.default.setProtocol(j.default.URL.GOOGLE_GEOCODE,b.https),o={url:n+"?"+k};h.default.xhr(o,function(a,b){if(a)return d(l.default.create(a),null);var e=f.default.safeJsonParse(b.responseText),g=l.default.fromResponse(e);return g?d(g,null):(e=c.raw?e:m.formatGeocodeResults(e.results),void d(null,e))})},formatDistanceResults:function(a){if(!f.default.isPlainObject(a))return null;var b=[],c=a.originAddresses,d=a.destinationAddresses,e=a.rows,g=void 0;return c.forEach(function(a,c){d.forEach(function(d,h){g=e[c].elements[h],b.push({from:a,to:d,distance:g.distance,duration:g.duration,fare:g.fare,timestamp:f.default.time()})})}),b},mapStylesToParams:function(a){if(!a)return"";f.default.isArray(a)||(a=[a]);var b=[];return a.forEach(function(a,c,d){var e="";a.stylers&&a.stylers.length>0&&(e+=(a.hasOwnProperty("featureType")?"feature:"+a.featureType:"feature:all")+"|",e+=(a.hasOwnProperty("elementType")?"element:"+a.elementType:"element:all")+"|",a.stylers.forEach(function(a,b,c){var d=Object.keys(a)[0],f=a[d].toString().replace("#","0x");e+=d+":"+f+"|"})),b.push("style="+encodeURIComponent(e))}),b.join("&")}};b.default=m},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c="//maps.googleapis.com/maps/api",d=Object.freeze({URL:{IP:"//api.ipify.org",FLAG:"//cdnjs.cloudflare.com/ajax/libs/flag-icon-css/2.3.1/flags/4x3/",GOOGLE_MAPS_API:c+"/js",GOOGLE_SATATIC_MAP:c+"/staticmap",GOOGLE_GEOLOCATION:"//www.googleapis.com/geolocation/v1/geolocate",GOOGLE_GEOCODE:"//maps.googleapis.com/maps/api/geocode/json",GOOGLE_TIMEZONE:"//maps.googleapis.com/maps/api/timezone/json",GOOGLE_DISTANCE_MATRIX:"//maps.googleapis.com/maps/api/distancematrix/json"},MapTypeId:{HYBRID:"hybrid",ROADMAP:"roadmap",SATELLITE:"satellite",TERRAIN:"terrain"},LocationType:{ROOFTOP:"ROOFTOP",RANGE_INTERPOLATED:"RANGE_INTERPOLATED",GEOMETRIC_CENTER:"GEOMETRIC_CENTER",APPROXIMATE:"APPROXIMATE"},TravelMode:{DRIVING:"DRIVING",WALKING:"WALKING",BICYCLING:"BICYCLING",TRANSIT:"TRANSIT"},UnitSystem:{METRIC:0,IMPERIAL:1},RadioType:{LTE:"lte",GSM:"gsm",CDMA:"cdma",WCDMA:"wcdma"},DistanceFormula:{HAVERSINE:"haversine",PYTHAGOREAN:"pythagorean"},ImageFormat:{PNG:"png",PNG_8:"png8",PNG_32:"png32",GIF:"gif",JPG:"jpg",JPG_BASELINE:"jpg-baseline"}});b.default=d},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a){return a?"OK"===a?null:"ZERO_RESULTS"===a?l.Code.NOT_FOUND:l.Code.hasOwnProperty(a)?a:null:l.Code.INVALID_RESPONSE}function g(a){switch(a){case"invalid":return l.Code.INVALID_REQUEST;case"dailyLimitExceeded":return l.Code.DAILY_LIMIT_EXCEEDED;case"keyInvalid":return l.Code.GOOGLE_KEY_INVALID;case"userRateLimitExceeded":return l.Code.USER_RATE_LIMIT_EXCEEDED;case"notFound":return l.Code.NOT_FOUND;case"parseError":return l.Code.PARSE_ERROR;default:return null}}Object.defineProperty(b,"__esModule",{value:!0});var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=c(2),k=d(j),l=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.Code.UNKNOWN_ERROR,c=arguments[1];e(this,a),c=c||String(b),Object.defineProperty(this,"name",{enumerable:!1,writable:!1,value:"GeoError"}),Object.defineProperty(this,"code",{enumerable:!1,writable:!0,value:b}),Object.defineProperty(this,"message",{enumerable:!1,writable:!0,value:c}),Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):Object.defineProperty(this,"stack",{enumerable:!1,writable:!1,value:new Error(c).stack})}return i(a,null,[{key:"create",value:function(b){if(b instanceof a)return b;var c=void 0,d=void 0;if(k.default.isPositionError(b)&&b.code){switch(b.code){case 1:c=a.Code.PERMISSION_DENIED;break;case 2:c=a.Code.POSITION_UNAVAILABLE;break;case 3:c=a.Code.TIMEOUT;break;default:c=a.Code.UNKNOWN_ERROR}return new a(c,b.message||"")}return"string"==typeof b?c=d=b:"object"===("undefined"==typeof b?"undefined":h(b))&&(c=b.code||b.message,d=b.message||b.code),c&&a.isValidErrorCode(c)?new a(c,d):new a(a.Code.UNKNOWN_ERROR,d)}},{key:"fromResponse",value:function(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!b)return new a(a.Code.INVALID_RESPONSE);var d=void 0;if(k.default.isString(b)&&(d=f(b)))return new a(d,c||b);if(!k.default.isObject(b))return null;var e=b.error_message||b.errorMessage||b.error&&b.error.message||""||"";if(b.status&&(d=f(b.status)))return new a(d,e||c||b.status);if(b.error){var h=b.reason||b.error.reason;if(!h){var i=b.error.errors;k.default.isArray(i)&&i.length>0&&(h=i[0].reason,e=e||i[0].message)}return d=g(h)||a.Code.UNKNOWN_ERROR,new a(d,e||h||c)}return e?(d=f(e)||a.Code.UNKNOWN_ERROR,new a(d,e||c)):null}},{key:"isGeoError",value:function(b){return b instanceof a}},{key:"isValidErrorCode",value:function(b){var c=void 0;for(c in a.Code)if(a.Code.hasOwnProperty(c)&&b===a.Code[c])return!0;return!1}}]),a}();l.prototype.toString=function(){var a=this.code!==this.message?" ("+this.message+")":"";return this.name+": "+this.code+a},"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(l.prototype,Error.prototype):l.prototype=Object.create(Error.prototype),l.Code={GEOLOCATION_NOT_SUPPORTED:"GEOLOCATION_NOT_SUPPORTED",INVALID_GEO_IP_SOURCE:"INVALID_GEO_IP_SOURCE",PERMISSION_DENIED:"PERMISSION_DENIED",POSITION_UNAVAILABLE:"POSITION_UNAVAILABLE",TIMEOUT:"TIMEOUT",INVALID_PARAMETERS:"INVALID_PARAMETERS",INVALID_RESPONSE:"INVALID_RESPONSE",INVALID_REQUEST:"INVALID_REQUEST",REQUEST_DENIED:"REQUEST_DENIED",REQUEST_FAILED:"REQUEST_FAILED",GOOGLE_API_FAILED:"GOOGLE_API_FAILED",
OVER_QUERY_LIMIT:"OVER_QUERY_LIMIT",USER_RATE_LIMIT_EXCEEDED:"USER_RATE_LIMIT_EXCEEDED",DAILY_LIMIT_EXCEEDED:"DAILY_LIMIT_EXCEEDED",GOOGLE_KEY_INVALID:"GOOGLE_KEY_INVALID",MAX_ELEMENTS_EXCEEDED:"MAX_ELEMENTS_EXCEEDED",MAX_DIMENSIONS_EXCEEDED:"MAX_DIMENSIONS_EXCEEDED",MAX_WAYPOINTS_EXCEEDED:"MAX_WAYPOINTS_EXCEEDED",PARSE_ERROR:"PARSE_ERROR",NOT_FOUND:"NOT_FOUND",INTERNAL_ERROR:"INTERNAL_ERROR",UNKNOWN_ERROR:"UNKNOWN_ERROR"},b.default=l},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(2),h=d(g),i=function(){function a(b,c){var d=this,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(this,a),this.isCleared=!1,this.cycle=0,this._timer=null,this.id=navigator.geolocation.watchPosition(function(a){d.cycle++,h.default.isFunction(b)&&b(a)},function(a){d.cycle++,h.default.isFunction(c)&&c(a),f.clearOnError&&d.clear()},f)}return f(a,[{key:"_clear",value:function(){navigator.geolocation.clearWatch(this.id),this.isCleared=!0,this._timer=null}},{key:"clear",value:function(a,b){var c=this,d=h.default.isNumber(a)?a:0,e=h.default.isFunction(b)?b:h.default.isFunction(a)?a:null;if(this._timer&&(clearTimeout(this._timer),this._timer=null),!this.isCleared){if(0===d)return this._clear(),void(e&&e());this._timer=setTimeout(function(){c._clear(),e&&e()},d)}}}]),a}();b.default=i}])}),function(a){"use strict";a(document).ready(function(){function b(){h[0].play()}function c(b){var c=(a("<img />",{class:"where-u-from",src:"./img/lurkin.gif"}),a("<img />",{class:"where-u-from",src:"./img/puttin_it_down.gif"}));g.fadeOut(350,function(){clearInterval(j)});var d=a("<audio />",{autoplay:!0,class:"the-plug"});if("Richmond"!==b.address.city){var h=a("<source />",{src:i+"audio/aint-from-my-hood.mp3",type:"audio/mpeg"}),k=a("<source />",{src:i+"audio/aint-from-my-hood.ogg",type:"audio/ogg"});f.css("background-image",'url("./img/no-respect.jpg")')}else{var h=a("<source />",{src:i+"audio/4-my-hood.mp3",type:"audio/mpeg"}),k=a("<source />",{src:i+"audio/4-my-hood.ogg",type:"audio/ogg"});f.css("background-image",'url("./img/tank.jpg")').append(c)}d.html([h,k]).appendTo(e),"Richmond"===b.address.city?f.css("background-image",'url("./img/tank.jpg")').append(c):f.css("background-image",'url("./img/no-respect.jpg")')}function d(a){console.error(a)}var e=a("#main"),f=a("body"),g=a(".where-u-from"),h=a(".the-plug"),i=window.location,j=window.setInterval(b,1e3),k={enableHighAccuracy:!0,timeout:6e3,maximumAge:0};geolocator.locate(c,d,!0,k)})}(window.jQuery);